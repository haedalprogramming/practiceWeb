# 03. ES6+ 변수와 스코프

## 1) 변수

프로그래밍에서 **변수**는 데이터를 저장하는 '이름이 붙은 상자'와 같습니다. 여러분이 어떤 값을 기억하고 싶을 때, 그 값을 변수라는 상자에 넣어두고 필요할 때마다 상자의 이름을 불러서 안에 있는 값을 꺼내 사용할 수 있습니다. 예를 들어, 여러분의 나이, 좋아하는 색깔, 시험 점수 등을 컴퓨터 프로그램이 기억하게 하고 싶을 때 변수를 사용합니다.

```javascript
// age라는 상자에 13이라는 숫자를 넣음
var age = 13;
console.log(age); // age 상자 안에 있는 값인 13을 출력

// name이라는 상자에 "김철수"라는 문자열을 넣음
var name = "김철수";
console.log(name); // name 상자 안에 있는 값인 "김철수"를 출력
```

> [!NOTE]
> 변수 이름은 영어 소문자, 숫자, 언더스코어(`_`), 달러 기호(`$`)로 만들 수 있습니다. 하지만 숫자로 시작하면 안 됩니다. 또한, 변수 이름은 그 변수가 어떤 값을 저장하는지 쉽게 알 수 있도록 의미 있게 짓는 것이 좋습니다. 예를 들어, 나이를 저장하는 변수는 `a`보다는 `age`라고 짓는 것이 훨씬 좋습니다.

## 2) var vs let vs const

JavaScript는 시간이 지나면서 발전해왔습니다. ES6(ECMAScript 2015) 이전에는 변수를 선언할 때 `var` 키워드만 사용했지만, `var`에는 몇 가지 문제점이 있었습니다. 이러한 문제점을 해결하고 더 안전한 코드를 작성할 수 있도록 ES6부터 `let`과 `const`가 새롭게 도입되었습니다.

### 2-1) var (옛날 방식)

`var`는 JavaScript 초창기부터 사용되던 변수 선언 방식입니다. 하지만 다음과 같은 특징 때문에 현대 JavaScript에서는 잘 사용되지 않습니다.

*   **함수 스코프**: `var`로 선언된 변수는 함수 안에서만 유효합니다. `if`문이나 `for`문 같은 블록(`{}`) 안에서 선언해도 블록 밖에서 접근할 수 있어 혼란을 줄 수 있습니다.
*   **재선언 가능**: 같은 이름의 변수를 여러 번 선언해도 오류가 발생하지 않고, 마지막에 선언된 값으로 덮어씌워집니다. 이는 의도치 않은 값 변경으로 이어질 수 있습니다.

```javascript
var x = 1; // x에 1을 할당
if (true) {
  var x = 2; // 같은 이름의 x를 다시 선언하고 2를 할당. 오류가 발생하지 않습니다!
  console.log(x); // 2
}
console.log(x); // 2  (if 블록({})을 무시하고 함수 전체에서 x의 값이 2로 변경됨)
```

> [!WARNING]
> `var`는 코드의 예측을 어렵게 하고 잠재적인 버그를 유발할 수 있기 때문에, 특별한 경우가 아니라면 사용하지 않는 것이 좋습니다.

### 2-2) let (블록 스코프)

`let`은 `var`의 문제점을 해결하기 위해 도입된 키워드입니다. `let`으로 선언된 변수는 다음과 같은 특징을 가집니다.

*   **블록 스코프**: `{}` (중괄호)로 묶인 코드 블록 안에서만 유효합니다. 블록 밖에서는 접근할 수 없습니다. 이는 변수의 유효 범위를 명확하게 하여 코드의 예측 가능성을 높여줍니다.
*   **재선언 불가능**: 같은 블록 안에서는 같은 이름의 변수를 다시 선언할 수 없습니다. 재선언을 시도하면 오류가 발생하여 의도치 않은 값 변경을 방지할 수 있습니다.
*   **재할당 가능**: 한 번 선언된 변수에 새로운 값을 다시 할당할 수 있습니다.

```javascript
let y = 5; // y에 5를 할당
if (true) {
  let y = 10; // 새로운 블록이므로, 이 y는 위의 y와는 다른 별개의 변수입니다.
  console.log(y); // 10 (블록 안의 y)
}
console.log(y); // 5  (블록 밖의 y는 변경되지 않고 원래 값인 5를 유지)

// let y = 20; // 오류! 같은 블록 안에서 y를 다시 선언할 수 없습니다.
y = 20;       // 가능! y의 값을 20으로 재할당합니다.
console.log(y); // 20
```

> [!NOTE]
> `let`은 값이 변할 수 있는 변수를 선언할 때 사용하며, `var`보다 훨씬 안전하고 예측 가능한 코드를 작성할 수 있게 해줍니다.

### 2-3) const (상수)

`const`는 `let`과 함께 도입된 키워드로, '상수(constant)'를 선언할 때 사용합니다. `const`로 선언된 변수는 다음과 같은 특징을 가집니다.

*   **블록 스코프**: `let`과 마찬가지로 블록 스코프를 가집니다.
*   **재선언 불가능**: `let`과 마찬가지로 같은 블록 안에서 다시 선언할 수 없습니다.
*   **재할당 불가능**: 가장 중요한 특징으로, 한 번 값을 할당하면 **절대 변경할 수 없습니다.** 값을 변경하려고 시도하면 오류가 발생합니다.

```javascript
const PI = 3.14159; // PI에 값을 할당
console.log(PI);    // 3.14159

// PI = 3.14; // 오류 발생! const 변수는 값을 바꿀 수 없습니다.

const GREETING = "Hello";
// GREETING = "Hi"; // 오류 발생!
```

> [!WARNING]
> `const`는 '변하지 않는 값'을 선언할 때 사용합니다. 예를 들어, 수학 상수(`Math.PI`), 애플리케이션의 고정된 설정 값, 또는 한 번 정해지면 변경될 필요가 없는 데이터 등에 사용됩니다.

> [!NOTE]
> `const`가 '값을 변경할 수 없다'는 것은, 변수가 가리키는 '메모리 주소'가 변경될 수 있다는 의미입니다. 만약 `const`로 객체나 배열을 선언했다면, 그 객체나 배열 자체를 다른 것으로 바꿀 수는 없지만, 객체나 배열의 '내부 내용'은 변경할 수 있습니다. 이 부분은 나중에 객체와 배열을 배울 때 더 자세히 다루겠습니다.

> [!TIP]
> 실수로 값을 바꾸는 것을 막기 위해, 변경이 필요하지 않은 경우 `const`를 기본으로 사용하는 습관을 들이는 게 좋습니다. 값이 꼭 바뀌어야 할 때만 `let`을 사용합니다.

## 3) 스코프(유효 범위)란?

스코프(Scope)는 '변수가 사용 가능한 범위'를 말합니다. JavaScript는 이 스코프 규칙을 통해 변수들이 어디에서 접근 가능하고 어디에서 접근 불가능한지를 결정합니다. 스코프를 이해하는 것은 코드를 예측 가능하고 오류 없이 작성하는 데 매우 중요합니다.

### 3-1) 함수 스코프 (Function Scope)

`var`로 만든 변수는 함수 안에서만 사용할 수 있습니다. 함수 밖에서는 해당 변수에 접근할 수 없습니다. 이는 함수가 하나의 독립적인 공간을 만들고, 그 안에서 선언된 `var` 변수는 그 공간 안에서만 유효하다는 의미입니다.

```javascript
function greet() {
  var message = '안녕하세요'; // 이 변수는 greet 함수 안에서만 유효합니다.
  console.log(message); // 함수 안에서는 출력 가능: '안녕하세요'
}
greet();
// console.log(message); // 오류! 함수 밖에서는 message 변수를 찾을 수 없습니다.

var globalVar = "전역 변수"; // 함수 밖에서 선언된 var 변수는 어디서든 접근 가능합니다.
function showGlobal() {
  console.log(globalVar); // 함수 안에서도 접근 가능: '전역 변수'
}
showGlobal();
```

### 3-2) 블록 스코프 (Block Scope)

`let`과 `const`로 만든 변수는 `{}` (중괄호)로 묶인 코드 블록 안에서만 사용할 수 있습니다. `if`문, `for`문, 또는 단순히 중괄호로 묶인 모든 공간이 블록 스코프를 형성합니다.

```javascript
{
  let temp = 100; // 이 변수는 이 중괄호 블록 안에서만 유효합니다.
  console.log(temp); // 블록 안에서는 출력 가능: 100
}
// console.log(temp); // 오류! 블록 밖에서는 temp 변수를 찾을 수 없습니다.

if (true) {
  const PI = 3.14; // 이 PI는 if 블록 안에서만 유효합니다.
  console.log(PI); // 출력: 3.14
}
// console.log(PI); // 오류! if 블록 밖에서는 PI 변수를 찾을 수 없습니다.
```

> [!TIP]
> `let`과 `const`를 사용하면, 변수 충돌(이름이 겹쳐서 헷갈리는 문제)을 줄일 수 있습니다. 또한, 변수의 유효 범위를 제한함으로써 코드를 더 예측 가능하게 만들고, 디버깅(오류 찾기)을 더 쉽게 할 수 있습니다. 현대 JavaScript 개발에서는 `var` 대신 `let`과 `const`를 사용하는 것이 일반적입니다.

---

- [목차로 돌아가기](../README.md)
- [이전 강의로 이동](02-ES6-Basic.md)
- [다음 강의로 이동](04-ES6-Data-Types-and-Operators.md)
